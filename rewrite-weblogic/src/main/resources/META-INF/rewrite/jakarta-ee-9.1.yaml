#
# Copyright (c) 2024, Oracle and/or its affiliates.  All rights reserved.

# Licensed under the Universal Permissive License v 1.0 as shown at
# https://oss.oracle.com/licenses/upl.

# Subject to the condition set forth below, permission is hereby granted to any
# person obtaining a copy of this software, associated documentation and/or data
# (collectively the "Software"), free of charge and under any and all copyright
# rights in the Software, and any and all patent rights owned or freely
# licensable by each licensor hereunder covering either (i) the unmodified
# Software as contributed to or provided by such licensor, or (ii) the Larger
# Works (as defined below), to deal in both

# (a) the Software, and
# (b) any piece of software and/or hardware listed in the lrgrwrks.txt file if
# one is included with the Software (each a "Larger Work" to which the Software
# is contributed by such licensors),

# without restriction, including without limitation the rights to copy, create
# derivative works of, display, perform, and distribute the Software and make,
# use, sell, offer for sale, import, export, have made, and have sold the
# Software and the Larger Work(s), and to sublicense the foregoing rights on
# either these or other terms.

# This license is subject to the following condition:
# The above copyright notice and either this complete permission notice or at
# a minimum a reference to the UPL must be included in all copies or
# substantial portions of the Software.

# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
# AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
# OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
# SOFTWARE.
---
type: specs.openrewrite.org/v1beta/recipe
name: com.oracle.weblogic.rewrite.JakartaEE9_1
displayName: Migrate to Jakarta EE 9.1
description: These recipes help with Migration to Jakarta EE 9.1, flagging and updating deprecated methods.
tags:
  - weblogic
  - jakarta
  - jakartaee
recipeList:
  - org.openrewrite.java.migrate.jakarta.JavaxMigrationToJakarta
  - com.oracle.weblogic.rewrite.jakarta.Faces2xMigrationToJakartaFaces3x
  - com.oracle.weblogic.rewrite.jakarta.JavaxBeansXmlToJakarta9BeansXml
  - com.oracle.weblogic.rewrite.jakarta.JavaxApplicationXmlToJakarta9ApplicationXml
  - com.oracle.weblogic.rewrite.jakarta.JavaxEjbJarXmlToJakarta9EjbJarXml
  - com.oracle.weblogic.rewrite.jakarta.RemovalsServletJakarta9
  - com.oracle.weblogic.rewrite.jakarta.JavaxToJakartaCdiExtensions
  - com.oracle.weblogic.rewrite.jakarta.UpdateJakartaPlatform9_1
  - com.oracle.weblogic.rewrite.jakarta.UpgradeCommonOpenSourceLibraries
---
type: specs.openrewrite.org/v1beta/recipe
name: com.oracle.weblogic.rewrite.jakarta.JavaxBeansXmlToJakarta9BeansXml
displayName: Migrate xmlns entries in `beans.xml` files for Beans 3.0.
description: Java EE has been rebranded to Jakarta EE, necessitating an XML namespace relocation.
tags:
  - jakarta
  - beans
  - cdi
preconditions:
  - org.openrewrite.FindSourceFiles:
      filePattern: '**/beans.xml'
recipeList:
  - org.openrewrite.xml.ChangeTagAttribute:
      attributeName: version
      elementName: beans
      newValue: 3.0
  - org.openrewrite.xml.ChangeTagAttribute:
      attributeName: xmlns
      elementName: beans
      newValue: https://jakarta.ee/xml/ns/jakartaee
  - org.openrewrite.xml.ChangeTagAttribute:
      attributeName: xsi:schemaLocation
      elementName: beans
      newValue: https://jakarta.ee/xml/ns/jakartaee https://jakarta.ee/xml/ns/jakartaee/beans_3_0.xsd
---
type: specs.openrewrite.org/v1beta/recipe
name: com.oracle.weblogic.rewrite.jakarta.JavaxApplicationXmlToJakarta9ApplicationXml
displayName: Migrate xmlns entries in `application.xml` files.
description: Java EE has been rebranded to Jakarta EE, necessitating an XML namespace relocation.
tags:
  - jakarta
  - application
preconditions:
  - org.openrewrite.FindSourceFiles:
      filePattern: '**/application.xml'
recipeList:
  - org.openrewrite.xml.ChangeTagAttribute:
      attributeName: version
      elementName: application
      newValue: 9.0
  - org.openrewrite.xml.ChangeTagAttribute:
      attributeName: xmlns
      elementName: application
      newValue: https://jakarta.ee/xml/ns/jakartaee
  - org.openrewrite.xml.ChangeTagAttribute:
      attributeName: xsi:schemaLocation
      elementName: application
      newValue: https://jakarta.ee/xml/ns/jakartaee https://jakarta.ee/xml/ns/jakartaee/application_9.xsd
  - org.openrewrite.text.FindAndReplace:
      find: javax.
      replace: jakarta.
      filePattern: '**/ejb-jar.xml'
---
type: specs.openrewrite.org/v1beta/recipe
name: com.oracle.weblogic.rewrite.jakarta.JavaxEjbJarXmlToJakarta9EjbJarXml
displayName: Migrate xmlns entries in `ejb-jar.xml` files.
description: Java EE has been rebranded to Jakarta EE, necessitating an XML namespace relocation.
tags:
  - jakarta
  - ejb
preconditions:
  - org.openrewrite.FindSourceFiles:
      filePattern: '**/ejb-jar.xml'
recipeList:
  - org.openrewrite.xml.ChangeTagAttribute:
      elementName: ejb-jar
      attributeName: version
      newValue: 4.0
  - org.openrewrite.xml.ChangeTagAttribute:
      elementName: ejb-jar
      attributeName: xmlns
      newValue: https://jakarta.ee/xml/ns/jakartaee
  - org.openrewrite.xml.ChangeTagAttribute:
      elementName: ejb-jar
      attributeName: xsi:schemaLocation
      newValue: https://jakarta.ee/xml/ns/jakartaee https://jakarta.ee/xml/ns/jakartaee/ejb-jar_4_0.xsd
  - org.openrewrite.text.FindAndReplace:
      find: javax.
      replace: jakarta.
      filePattern: '**/ejb-jar.xml'
---
type: specs.openrewrite.org/v1beta/recipe
name: com.oracle.weblogic.rewrite.jakarta.RemovalsServletJakarta9
displayName: Replace  deprecated Jakarta Servlet methods and classes
description: >
  This recipe replaces the classes and methods deprecated in Jakarta Servlet 5.0
recipeList:
  - org.openrewrite.java.ChangeType:
      oldFullyQualifiedTypeName: javax.servlet.http.HttpServletRequest
      newFullyQualifiedTypeName: jakarta.servlet.http.HttpServletRequest
  - org.openrewrite.java.ChangeType:
      oldFullyQualifiedTypeName: javax.servlet.http.HttpServletRequestWrapper
      newFullyQualifiedTypeName: jakarta.servlet.http.HttpServletRequestWrapper
  - org.openrewrite.java.ChangeType:
      oldFullyQualifiedTypeName: javax.servlet.http.HttpServletResponse
      newFullyQualifiedTypeName: jakarta.servlet.http.HttpServletResponse
  - org.openrewrite.java.ChangeType:
      oldFullyQualifiedTypeName: javax.servlet.http.HttpServletResponseWrapper
      newFullyQualifiedTypeName: jakarta.servlet.http.HttpServletResponseWrapper
  - org.openrewrite.java.ChangeType:
      oldFullyQualifiedTypeName: javax.servlet.http.HttpSession
      newFullyQualifiedTypeName: jakarta.servlet.http.HttpSession
  - org.openrewrite.java.ChangeType:
      oldFullyQualifiedTypeName: javax.servlet.ServletContext
      newFullyQualifiedTypeName: jakarta.servlet.ServletContext
  - org.openrewrite.java.ChangeType:
      oldFullyQualifiedTypeName: javax.servlet.UnavailableException
      newFullyQualifiedTypeName: jakarta.servlet.UnavailableException
  - org.openrewrite.java.ChangeMethodName:
      methodPattern: jakarta.servlet.http.HttpServletRequest  isRequestedSessionIdFromUrl()
      newMethodName: isRequestedSessionIdFromURL
  - org.openrewrite.java.ChangeMethodName:
      methodPattern: jakarta.servlet.http.HttpServletRequestWrapper  isRequestedSessionIdFromUrl()
      newMethodName: isRequestedSessionIdFromURL
  - org.openrewrite.java.ChangeMethodName:
      methodPattern: jakarta.servlet.http.HttpServletResponse encodeUrl(String)
      newMethodName: encodeURL
  - org.openrewrite.java.ChangeMethodName:
      methodPattern: jakarta.servlet.http.HttpServletResponseWrapper encodeUrl(String)
      newMethodName: encodeURL
  - org.openrewrite.java.ChangeMethodName:
      methodPattern: jakarta.servlet.http.HttpServletResponse encodeRedirectUrl(String)
      newMethodName: encodeRedirectURL
  - org.openrewrite.java.ChangeMethodName:
      methodPattern: jakarta.servlet.http.HttpServletResponseWrapper encodeRedirectUrl(String)"
      newMethodName: encodeRedirectURL
  - org.openrewrite.java.ChangeMethodName:
      methodPattern: jakarta.servlet.http.HttpSession getValue(String)
      newMethodName: getAttribute
  - org.openrewrite.java.ChangeMethodName:
      methodPattern: jakarta.servlet.http.HttpSession getValueNames()
      newMethodName: getAttributeNames
  - org.openrewrite.java.ChangeMethodName:
      methodPattern: jakarta.servlet.http.HttpSession putValue(String, Object)
      newMethodName: setAttribute
  - org.openrewrite.java.ChangeMethodName:
      methodPattern: jakarta.servlet.http.HttpSession removeValue(String)
      newMethodName: removeAttribute
  - org.openrewrite.java.DeleteMethodArgument:
      methodPattern: jakarta.servlet.http.HttpServletResponse setStatus(int, String)
      argumentIndex: 1
  - org.openrewrite.java.DeleteMethodArgument:
      methodPattern: jakarta.servlet.http.HttpServletResponseWrapper setStatus(int, String)
      argumentIndex: 1
  - org.openrewrite.java.ReorderMethodArguments:
      methodPattern: jakarta.servlet.ServletContext log(Exception, String)
      newParameterNames: [ ex, str ]
      oldParameterNames: [ str, ex ]
      matchOverrides: true
  - org.openrewrite.java.migrate.jakarta.UpdateGetRealPath
  - org.openrewrite.java.DeleteMethodArgument:
      methodPattern: jakarta.servlet.UnavailableException <constructor>(jakarta.servlet.Servlet, String)
      argumentIndex: 0
  - org.openrewrite.java.DeleteMethodArgument:
      methodPattern: jakarta.servlet.UnavailableException <constructor>(int, jakarta.servlet.Servlet, String)
      argumentIndex: 1
  - org.openrewrite.java.ReorderMethodArguments:
      methodPattern: jakarta.servlet.UnavailableException <constructor>(int, String)
      oldParameterNames: [ in, str ]
      newParameterNames: [ str, in ]
      matchOverrides: true
---
type: specs.openrewrite.org/v1beta/recipe
name: com.oracle.weblogic.rewrite.jakarta.JavaxToJakartaCdiExtensions
displayName: Rename CDI Extension to Jakarta
description: Rename `javax.enterprise.inject.spi.Extension` to `jakarta.enterprise.inject.spi.Extension`.
recipeList:
  - org.openrewrite.RenameFile:
      fileMatcher: '**/javax.enterprise.inject.spi.Extension'
      fileName: jakarta.enterprise.inject.spi.Extension
---
type: specs.openrewrite.org/v1beta/recipe
name: com.oracle.weblogic.rewrite.jakarta.UpdateJakartaPlatform9_1
displayName: Update Jakarta EE Platform Dependencies to 9.1.0
description: Update Jakarta EE Platform Dependencies to 9.1.0
tags:
    - jakarta
    - dependencies
recipeList:
  - org.openrewrite.java.dependencies.UpgradeDependencyVersion:
      groupId: jakarta.platform
      artifactId: '*'
      newVersion: 9.1.0
---
type: specs.openrewrite.org/v1beta/recipe
name: com.oracle.weblogic.rewrite.jakarta.UpgradeCommonOpenSourceLibraries
displayName: Upgrade Common open source libraries
description: Upgrade Common open source libraries libraries to Jakarta EE9 versions.
tags:
  - jakarta
  - hibernate
recipeList:
  - com.oracle.weblogic.rewrite.hibernate.MigrateToHibernateJakartaEE9
---
type: specs.openrewrite.org/v1beta/recipe
name: com.oracle.weblogic.rewrite.hibernate.MigrateToHibernateJakartaEE9
displayName: Migrate to Hibernate for Jakarta EE 9
description: Upgrade hibernate libraries to Jakarta EE9 versions.
tags:
  - jakarta
  - hibernate
recipeList:
  - org.openrewrite.hibernate.MigrateToHibernate65
  - org.openrewrite.java.dependencies.UpgradeDependencyVersion:
      groupId: org.hibernate.orm
      artifactId: '*'
      newVersion: 6.6.x
  - org.openrewrite.java.dependencies.UpgradeDependencyVersion:
      groupId: org.hibernate.search
      artifactId: '*'
      newVersion: 7.2.x
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.hibernate
      oldArtifactId: hibernate-validator
      newGroupId: org.hibernate.validator
      newVersion: 8.0.x